<p>
Notes:
</p>
<ul>
<li>&dagger; after an issue number denotes the lack of an official catalogue number.</li>
<li>* after an issue number denotes that only part of the take has been used for the issued title</li>
<li>â€¡ indicates are release is not confirmed.</li>
<li>External links have the following codes
  <ul>
    <li>(YT): YouTube</li>
    <li>(S): Spotify</li>
    <li>(T): Tidal</li>
    <li>(D): Discogs.com</li>
  </ul>
</li>
</ul>

<table class="discog_table">
<tr class="pre_heading"/>
<tr class="main_heading">
  <th>Index</th>
  <th>Matrix No.</th>
  <th>Title</th>
  <th>Releases</th>
  <th>New DESOR</th>
</tr>

{{/* Could also use getJSON */}}

{{ $release_data := $.Site.Data.discog.releases }}

{{ range index $.Site.Data.discog (.Get 0) }}
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr class="session_heading">
    <th colspan="3"> {{ .group }} </th>
    <th colspan="1"> {{ .location }} </th>
    <th colspan="2"> {{ .date }} </th>
  </tr>
  <tr class="take">
    <td colspan="6"> {{ .description }} </td>
  </tr>
  {{ range .entries }}
    {{ if eq .type "take" }}
      <tr class="take" id="take-{{ .index }}">
        <td> {{ .index }} </td>
        <td> {{ .matrix }} </td>
        <td> {{ .title }}
          {{ if .youtube }}
          <a href="{{.youtube}}" class="discog_link">(YT)</a>
          {{ end }}
          {{ if .spotify }}
          <a href="{{.spotify}}" class="discog_link">(S)</a>
          {{ end }}
          {{ if .tidal }}
          <a href="{{.tidal}}" class="discog_link">(T)</a>
          {{ end }}
        </td>
        <td>
          {{ $releases := .releases }}
          {{ range $idx, $elem := .releases }}
            {{/* Label, identifier and any trailing symbol like a dagger */}}
            {{- index $elem 0 }}
            {{ index $elem 1 -}}
            {{- index $elem 2 -}}
            {{ if and (isset $release_data (index $elem 0)) (isset (index $release_data (index $elem 0)) (index $elem 1)) }}
              {{- $release_info := index $release_data (index $elem 0) (index $elem 1) -}}

              {{- if isset $release_info "discogs" -}}
                <a href="{{ index $release_info "discogs" }}" class="discog_link">(D)</a>
              {{- end -}}
              {{- if isset $release_info "spotify" -}}
                <a href="{{ index $release_info "spotify" }}" class="discog_link">(S)</a>
              {{- end -}}
              {{- if isset $release_info "tidal" -}}
                <a href="{{ index $release_info "tidal" }}" class="discog_link">(T)</a>
              {{- end -}}
              {{- if isset $release_info "youtube" -}}
                <a href="{{ index $release_info "youtube" }}" class="discog_link">(T)</a>
              {{- end -}}

            {{- end -}}
            {{- if ne (len $releases) (add $idx 1) -}}, {{- end -}}
          {{ end }}
        </td>
        <td> {{ .desor }} </td>
      </tr>
    {{ else if eq .type "note" }}
      <tr class="artists">
        <td colspan="6"> {{ $.Page.RenderString .content }} </td>
      </tr>
    {{ else }}
      <tr class="artists">
        <td colspan="6"> {{ .value }} </td>
      </tr>
    {{ end }}
  {{ end }}
{{ end }}
</table>
