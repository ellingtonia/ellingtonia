<p>Click on any index number to be taken to the corresponding session.</p>

<p>See the <a href="{{ ref $.Page "discography/labels" }}">Record Labels</a> page for a list of all labels.</p>

<p>
Key to symbols:
<ul>
<li>&dagger; after an issue number denotes the lack of an official catalogue number.</li>
<li>* after an issue number denotes that only part of the take has been used for the issued title</li>
<li>â€¡ indicates a release is not confirmed.</li>
<li>External links have the following codes
  <ul>
    <li>(D): Discogs.com</li>
    <li>(MB): MusicBrainz.org</li>
    <li>(S): Spotify</li>
    <li>(T): Tidal</li>
    <li>(YT): YouTube</li>
  </ul>
</li>
</ul>
</p>

<p>Note that the tracks are listed in the order in they were recorded, not the order on the LP or CD.</p>

<h1>Table of Contents</h1>

<ul>
{{ range $label, $releases := $.Site.Data.discog.releases }}

  {{ $release_list := slice }}

  {{ range $catalog, $release_data := $releases }}
  {{ $release_list = $release_list | append $catalog }}
  {{ end }}

  <li>{{ $label }}: {{ index $.Site.Data.discog.labels $label }}
    <ul>
      {{ range $catalog, $release_data := $releases }}
        {{ $escaped_release_name := printf "%s-%s" (urlquery $label) (urlquery $catalog )}}
        <li><a href="#release-{{ $escaped_release_name }}">{{$label}} {{ $catalog }}</a></li>
      {{ end }}
    </ul>
  </li>

{{ end }}

</ul>

<h1>Releases</h1>

{{ range $label, $releases := $.Site.Data.discog.releases}}
  <h2 id="label-{{ urlquery $label }}">{{ $label }}: {{ index $.Site.Data.discog.labels $label }}</h2>

  {{ range $catalog, $release_data := $releases }}
    {{ $escaped_release_name := printf "%s-%s" (urlquery $label) (urlquery $catalog )}}

    <h3 id="release-{{ $escaped_release_name }}">
      {{ $label }} {{ $catalog }}

      {{ if $release_data.discogs }}
      <a href="{{.discogs}}" class="discog_link">(D)</a>
      {{ end }}

      {{ if $release_data.musicbrainz }}
      <a href="{{.musicbrainz}}" class="discog_link">(MB)</a>
      {{ end }}

      {{ if $release_data.spotify }}
      <a href="{{.spotify}}" class="discog_link">(S)</a>
      {{ end }}

      {{ if $release_data.tidal }}
      <a href="{{.tidal}}" class="discog_link">(T)</a>
      {{ end }}

      {{ if $release_data.youtube }}
      <a href="{{.youtube}}" class="discog_link">(YT)</a>
      {{ end }}
    </h3>

    <table class="discog_table">
      <tr class="pre_heading"/>
      <tr class="main_heading">
        <th>Index</th>
        <th>Matrix No.</th>
        <th>Title</th>
        <th>New DESOR</th>
      </tr>
      {{ range $take := $release_data.takes }}
        <tr class="take">
          {{ $page := ref $.Page (printf "discography/%s" $take.page) }}
          <td><a href="{{ $page }}#take-{{ $take.index }}">{{ $take.index }}</a></td>
          <td>{{ $take.matrix }}</td>
          <td> {{ $take.title }}{{ $take.flags }}
            {{- if $take.spotify -}}
            <a href="{{$take.spotify}}" class="discog_link">(S)</a>
            {{- end -}}
            {{- if $take.tidal -}}
            <a href="{{$take.tidal}}" class="discog_link">(T)</a>
            {{- end -}}
            {{- if $take.youtube -}}
            <a href="{{$take.youtube}}" class="discog_link">(YT)</a>
            {{- end -}}
          </td>
          <td>{{ $take.desor }}</td>
        </tr>
      {{ end }}
    </table>
  {{ end }}
{{ end }}
